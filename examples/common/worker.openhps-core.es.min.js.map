{"version":3,"file":"web/worker.openhps-core.es.min.js","mappings":"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","sources":["webpack://@openhps/core/./dist/esm5/worker/WorkerBase.js","webpack://@openhps/core/./dist/esm5/worker/ sync","webpack://@openhps/core/./node_modules/debug/src/browser.js","webpack://@openhps/core/./node_modules/debug/src/common.js","webpack://@openhps/core/./node_modules/is-observable/index.js","webpack://@openhps/core/./node_modules/ms/index.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/_scheduler.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/_symbols.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/observable.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/unsubscribe.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/filter.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/flatMap.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/_util.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/interval.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/map.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/merge.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/subject.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/multicast.js","webpack://@openhps/core/./node_modules/observable-fns/dist.esm/scan.js","webpack://@openhps/core/./node_modules/reflect-metadata/Reflect.js","webpack://@openhps/core/./node_modules/threads/dist/common.js","webpack://@openhps/core/./node_modules/threads/dist/index.js","webpack://@openhps/core/./node_modules/threads/dist/master/get-bundle-url.browser.js","webpack://@openhps/core/./node_modules/threads/dist/master/implementation.browser.js","webpack://@openhps/core/./node_modules/threads/dist/master/index.js","webpack://@openhps/core/./node_modules/threads/dist/master/invocation-proxy.js","webpack://@openhps/core/./node_modules/threads/dist/master/pool-types.js","webpack://@openhps/core/./node_modules/threads/dist/master/pool.js","webpack://@openhps/core/./node_modules/threads/dist/master/spawn.js","webpack://@openhps/core/./node_modules/threads/dist/master/thread.js","webpack://@openhps/core/./node_modules/threads/dist/observable-promise.js","webpack://@openhps/core/./node_modules/threads/dist/observable.js","webpack://@openhps/core/./node_modules/threads/dist/ponyfills.js","webpack://@openhps/core/./node_modules/threads/dist/promise.js","webpack://@openhps/core/./node_modules/threads/dist/serializers.js","webpack://@openhps/core/./node_modules/threads/dist/symbols.js","webpack://@openhps/core/./node_modules/threads/dist/transferable.js","webpack://@openhps/core/./node_modules/threads/dist/types/master.js","webpack://@openhps/core/./node_modules/threads/dist/types/messages.js","webpack://@openhps/core/./node_modules/threads/dist/worker/implementation.browser.js","webpack://@openhps/core/./node_modules/threads/dist/worker/index.js","webpack://@openhps/core/external module \"./openhps-core.es.min.js\"","webpack://@openhps/core/./node_modules/tslib/tslib.es6.mjs","webpack://@openhps/core/webpack/bootstrap","webpack://@openhps/core/webpack/runtime/compat get default export","webpack://@openhps/core/webpack/runtime/define property getters","webpack://@openhps/core/webpack/runtime/global","webpack://@openhps/core/webpack/runtime/hasOwnProperty shorthand","webpack://@openhps/core/webpack/runtime/make namespace object","webpack://@openhps/core/./dist/esm5/worker/WorkerRunner.js"],"sourcesContent":["import { __awaiter } from \"tslib\";\nimport 'reflect-metadata';\nimport { Subject } from 'threads/observable';\nimport { DataSerializer, ModelBuilder, WorkerServiceProxy, CallbackSourceNode, CallbackSinkNode, DataService, DummyDataService, DummyService, ModelSerializer } from '..'; // external @openhps/core\nexport class WorkerBase {\n  constructor() {\n    this.pullOutput = new Subject();\n    this.pushOutput = new Subject();\n    this.serviceOutputCall = new Subject();\n    this.serviceOutputResponse = new Subject();\n    this.eventOutput = new Subject();\n  }\n  setShape(shape) {\n    this.shape = shape;\n  }\n  init(config) {\n    // eslint-disable-next-line no-async-promise-executor\n    return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n      this.config = config;\n      const importFn = typeof process !== 'object' ? config.type === 'module' ? file => import( /* webpackIgnore: true */file) // ES6\n      : file => Promise.resolve(importScripts( /* webpackIgnore: true */file)) // CJS\n      :\n      // eslint-disable-next-line @typescript-eslint/no-var-requires\n      file => Promise.resolve(require( /* webpackIgnore: true */file)); // NodeJS\n      // Set global dir name\n      // eslint-disable-next-line no-global-assign\n      __dirname = config.directory;\n      // Load external scripts\n      if (config.imports && config.imports.length > 0) {\n        config.imports.forEach(importFile => {\n          importFn(importFile);\n        });\n      }\n      // Create model\n      const modelBuilder = ModelBuilder.create();\n      // Add remote worker services if not already added\n      this.config.services.forEach(service => {\n        if (service.dataType) {\n          const DataType = DataSerializer.findTypeByName(service.dataType);\n          modelBuilder.addService(new DummyDataService(service.uid, DataType), new WorkerServiceProxy({\n            uid: service.uid,\n            callObservable: this.serviceOutputCall,\n            responseObservable: this.serviceOutputResponse\n          }));\n        } else {\n          modelBuilder.addService(new DummyService(service.uid), new WorkerServiceProxy({\n            uid: service.uid,\n            callObservable: this.serviceOutputCall,\n            responseObservable: this.serviceOutputResponse\n          }));\n        }\n      });\n      this._initModel(modelBuilder);\n      // eslint-disable-next-line\n      const path = this.config.imports.length > 0 ? undefined : typeof process !== 'object' ? undefined : require('path');\n      if (this.config.serialized) {\n        try {\n          const traversalBuilder = modelBuilder.from();\n          const modelOrNode = ModelSerializer.deserializeNode(this.config.serialized);\n          traversalBuilder.via(modelOrNode);\n          traversalBuilder.to();\n        } catch (ex) {\n          // Error deserializing, did you import the nodes?\n          reject(ex);\n        }\n      } else if (this.config.builder) {\n        const traversalBuilder = modelBuilder.from();\n        // eslint-disable-next-line\n        const builderCallback = eval(this.config.builder);\n        builderCallback(traversalBuilder, modelBuilder, this.config.args);\n        traversalBuilder.to();\n      } else if (this.config.shape) {\n        // eslint-disable-next-line\n        const graph = yield importFn(path ? path.join(__dirname, this.config.shape) : this.config.shape);\n        if (graph) {\n          modelBuilder.addShape(graph.default);\n        }\n      } else if (this.shape) {\n        modelBuilder.addShape(this.shape);\n      }\n      modelBuilder.build().then(m => {\n        this.model = m;\n        resolve();\n      }).catch(reject);\n    }));\n  }\n  /**\n   * Pull from this work\n   * @param {PullOptions} [options] Pull options\n   * @returns {Promise<void>} Pull promise\n   */\n  pull(options) {\n    return this.model.pull(options);\n  }\n  /**\n   * Push to this worker\n   * @param {DataFrame} frame Data frame\n   * @param {PushOptions} [options] Push options\n   * @returns {Promise<void>} Push promise\n   */\n  push(frame, options) {\n    return this.model.push(DataSerializer.deserialize(frame), options);\n  }\n  /**\n   * Init the model internal input and internal output\n   * @param {ModelBuilder} modelBuilder Model builder\n   */\n  _initModel(modelBuilder) {\n    const internalSource = new CallbackSourceNode(options => {\n      // Send a pull request to the main thread\n      this.pullOutput.next(options);\n      return undefined;\n    });\n    const internalSink = new CallbackSinkNode(frame => {\n      // Serialize the frame and transmit it to the main thread\n      this.pushOutput.next(DataSerializer.serialize(frame));\n    });\n    modelBuilder.graph.deleteNode(modelBuilder.graph.internalSource);\n    modelBuilder.graph.internalSource = internalSource;\n    internalSource.on('error', event => {\n      this.eventOutput.next({\n        name: 'error',\n        event\n      });\n    });\n    internalSource.on('completed', event => {\n      this.eventOutput.next({\n        name: 'completed',\n        event\n      });\n    });\n    modelBuilder.graph.addNode(modelBuilder.graph.internalSource);\n    modelBuilder.graph.deleteNode(modelBuilder.graph.internalSink);\n    modelBuilder.graph.internalSink = internalSink;\n    modelBuilder.graph.addNode(modelBuilder.graph.internalSink);\n  }\n  findAllServices() {\n    return new Promise(resolve => {\n      const services = this.model.findAllServices();\n      const servicesArray = services.filter(service => !(service instanceof DummyDataService || service instanceof DummyService)).map(service => {\n        // Services are wrapped in a proxy. Get prototype\n        const serviceBase = Object.getPrototypeOf(service);\n        return {\n          uid: service.uid,\n          type: serviceBase.constructor.name,\n          dataType: service instanceof DataService ? service.driver.dataType.name : undefined\n        };\n      });\n      resolve(servicesArray);\n    });\n  }\n  callService(call) {\n    return new Promise((resolve, reject) => {\n      const service = this.model.findDataService(call.serviceUID) || this.model.findService(call.serviceUID);\n      if (service[call.method]) {\n        const serializedParams = call.parameters;\n        const params = [];\n        serializedParams.forEach(param => {\n          if (param['__type']) {\n            params.push(DataSerializer.deserialize(param));\n          } else {\n            params.push(param);\n          }\n        });\n        const promise = service[call.method](...params);\n        Promise.resolve(promise).then(_ => {\n          if (Array.isArray(_)) {\n            const result = [];\n            _.forEach(r => {\n              result.push(DataSerializer.serialize(r));\n            });\n            resolve({\n              id: call.id,\n              success: true,\n              result\n            });\n          } else {\n            const result = DataSerializer.serialize(_);\n            resolve({\n              id: call.id,\n              success: true,\n              result\n            });\n          }\n        }).catch(ex => {\n          reject({\n            id: call.id,\n            success: false,\n            result: ex\n          });\n        });\n      }\n    });\n  }\n}","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 653;\nmodule.exports = webpackEmptyContext;","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","'use strict';\n\nmodule.exports = value => {\n\tif (!value) {\n\t\treturn false;\n\t}\n\n\t// eslint-disable-next-line no-use-extend-native/no-use-extend-native\n\tif (typeof Symbol.observable === 'symbol' && typeof value[Symbol.observable] === 'function') {\n\t\t// eslint-disable-next-line no-use-extend-native/no-use-extend-native\n\t\treturn value === value[Symbol.observable]();\n\t}\n\n\tif (typeof value['@@observable'] === 'function') {\n\t\treturn value === value['@@observable']();\n\t}\n\n\treturn false;\n};\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nexport class AsyncSerialScheduler {\n    constructor(observer) {\n        this._baseObserver = observer;\n        this._pendingPromises = new Set();\n    }\n    complete() {\n        Promise.all(this._pendingPromises)\n            .then(() => this._baseObserver.complete())\n            .catch(error => this._baseObserver.error(error));\n    }\n    error(error) {\n        this._baseObserver.error(error);\n    }\n    schedule(task) {\n        const prevPromisesCompletion = Promise.all(this._pendingPromises);\n        const values = [];\n        const next = (value) => values.push(value);\n        const promise = Promise.resolve()\n            .then(() => __awaiter(this, void 0, void 0, function* () {\n            yield prevPromisesCompletion;\n            yield task(next);\n            this._pendingPromises.delete(promise);\n            for (const value of values) {\n                this._baseObserver.next(value);\n            }\n        }))\n            .catch(error => {\n            this._pendingPromises.delete(promise);\n            this._baseObserver.error(error);\n        });\n        this._pendingPromises.add(promise);\n    }\n}\n","export const hasSymbols = () => typeof Symbol === \"function\";\nexport const hasSymbol = (name) => hasSymbols() && Boolean(Symbol[name]);\nexport const getSymbol = (name) => hasSymbol(name) ? Symbol[name] : \"@@\" + name;\nexport function registerObservableSymbol() {\n    if (hasSymbols() && !hasSymbol(\"observable\")) {\n        Symbol.observable = Symbol(\"observable\");\n    }\n}\nif (!hasSymbol(\"asyncIterator\")) {\n    Symbol.asyncIterator = Symbol.asyncIterator || Symbol.for(\"Symbol.asyncIterator\");\n}\n","/**\n * Based on <https://raw.githubusercontent.com/zenparsing/zen-observable/master/src/Observable.js>\n * At commit: f63849a8c60af5d514efc8e9d6138d8273c49ad6\n */\nimport \"./symbols\";\nimport { getSymbol, hasSymbol, hasSymbols } from \"./_symbols\";\nconst SymbolIterator = getSymbol(\"iterator\");\nconst SymbolObservable = getSymbol(\"observable\");\nconst SymbolSpecies = getSymbol(\"species\");\n// === Abstract Operations ===\nfunction getMethod(obj, key) {\n    const value = obj[key];\n    if (value == null) {\n        return undefined;\n    }\n    if (typeof value !== \"function\") {\n        throw new TypeError(value + \" is not a function\");\n    }\n    return value;\n}\nfunction getSpecies(obj) {\n    let ctor = obj.constructor;\n    if (ctor !== undefined) {\n        ctor = ctor[SymbolSpecies];\n        if (ctor === null) {\n            ctor = undefined;\n        }\n    }\n    return ctor !== undefined ? ctor : Observable;\n}\nfunction isObservable(x) {\n    return x instanceof Observable; // SPEC: Brand check\n}\nfunction hostReportError(error) {\n    if (hostReportError.log) {\n        hostReportError.log(error);\n    }\n    else {\n        setTimeout(() => { throw error; }, 0);\n    }\n}\nfunction enqueue(fn) {\n    Promise.resolve().then(() => {\n        try {\n            fn();\n        }\n        catch (e) {\n            hostReportError(e);\n        }\n    });\n}\nfunction cleanupSubscription(subscription) {\n    const cleanup = subscription._cleanup;\n    if (cleanup === undefined) {\n        return;\n    }\n    subscription._cleanup = undefined;\n    if (!cleanup) {\n        return;\n    }\n    try {\n        if (typeof cleanup === \"function\") {\n            cleanup();\n        }\n        else {\n            const unsubscribe = getMethod(cleanup, \"unsubscribe\");\n            if (unsubscribe) {\n                unsubscribe.call(cleanup);\n            }\n        }\n    }\n    catch (e) {\n        hostReportError(e);\n    }\n}\nfunction closeSubscription(subscription) {\n    subscription._observer = undefined;\n    subscription._queue = undefined;\n    subscription._state = \"closed\";\n}\nfunction flushSubscription(subscription) {\n    const queue = subscription._queue;\n    if (!queue) {\n        return;\n    }\n    subscription._queue = undefined;\n    subscription._state = \"ready\";\n    for (const item of queue) {\n        notifySubscription(subscription, item.type, item.value);\n        if (subscription._state === \"closed\") {\n            break;\n        }\n    }\n}\nfunction notifySubscription(subscription, type, value) {\n    subscription._state = \"running\";\n    const observer = subscription._observer;\n    try {\n        const m = observer ? getMethod(observer, type) : undefined;\n        switch (type) {\n            case \"next\":\n                if (m)\n                    m.call(observer, value);\n                break;\n            case \"error\":\n                closeSubscription(subscription);\n                if (m)\n                    m.call(observer, value);\n                else\n                    throw value;\n                break;\n            case \"complete\":\n                closeSubscription(subscription);\n                if (m)\n                    m.call(observer);\n                break;\n        }\n    }\n    catch (e) {\n        hostReportError(e);\n    }\n    if (subscription._state === \"closed\") {\n        cleanupSubscription(subscription);\n    }\n    else if (subscription._state === \"running\") {\n        subscription._state = \"ready\";\n    }\n}\nfunction onNotify(subscription, type, value) {\n    if (subscription._state === \"closed\") {\n        return;\n    }\n    if (subscription._state === \"buffering\") {\n        subscription._queue = subscription._queue || [];\n        subscription._queue.push({ type, value });\n        return;\n    }\n    if (subscription._state !== \"ready\") {\n        subscription._state = \"buffering\";\n        subscription._queue = [{ type, value }];\n        enqueue(() => flushSubscription(subscription));\n        return;\n    }\n    notifySubscription(subscription, type, value);\n}\nexport class Subscription {\n    constructor(observer, subscriber) {\n        // ASSERT: observer is an object\n        // ASSERT: subscriber is callable\n        this._cleanup = undefined;\n        this._observer = observer;\n        this._queue = undefined;\n        this._state = \"initializing\";\n        const subscriptionObserver = new SubscriptionObserver(this);\n        try {\n            this._cleanup = subscriber.call(undefined, subscriptionObserver);\n        }\n        catch (e) {\n            subscriptionObserver.error(e);\n        }\n        if (this._state === \"initializing\") {\n            this._state = \"ready\";\n        }\n    }\n    get closed() {\n        return this._state === \"closed\";\n    }\n    unsubscribe() {\n        if (this._state !== \"closed\") {\n            closeSubscription(this);\n            cleanupSubscription(this);\n        }\n    }\n}\nexport class SubscriptionObserver {\n    constructor(subscription) { this._subscription = subscription; }\n    get closed() { return this._subscription._state === \"closed\"; }\n    next(value) { onNotify(this._subscription, \"next\", value); }\n    error(value) { onNotify(this._subscription, \"error\", value); }\n    complete() { onNotify(this._subscription, \"complete\"); }\n}\n/**\n * The basic Observable class. This primitive is used to wrap asynchronous\n * data streams in a common standardized data type that is interoperable\n * between libraries and can be composed to represent more complex processes.\n */\nexport class Observable {\n    constructor(subscriber) {\n        if (!(this instanceof Observable)) {\n            throw new TypeError(\"Observable cannot be called as a function\");\n        }\n        if (typeof subscriber !== \"function\") {\n            throw new TypeError(\"Observable initializer must be a function\");\n        }\n        this._subscriber = subscriber;\n    }\n    subscribe(nextOrObserver, onError, onComplete) {\n        if (typeof nextOrObserver !== \"object\" || nextOrObserver === null) {\n            nextOrObserver = {\n                next: nextOrObserver,\n                error: onError,\n                complete: onComplete\n            };\n        }\n        return new Subscription(nextOrObserver, this._subscriber);\n    }\n    pipe(first, ...mappers) {\n        // tslint:disable-next-line no-this-assignment\n        let intermediate = this;\n        for (const mapper of [first, ...mappers]) {\n            intermediate = mapper(intermediate);\n        }\n        return intermediate;\n    }\n    tap(nextOrObserver, onError, onComplete) {\n        const tapObserver = typeof nextOrObserver !== \"object\" || nextOrObserver === null\n            ? {\n                next: nextOrObserver,\n                error: onError,\n                complete: onComplete\n            }\n            : nextOrObserver;\n        return new Observable(observer => {\n            return this.subscribe({\n                next(value) {\n                    tapObserver.next && tapObserver.next(value);\n                    observer.next(value);\n                },\n                error(error) {\n                    tapObserver.error && tapObserver.error(error);\n                    observer.error(error);\n                },\n                complete() {\n                    tapObserver.complete && tapObserver.complete();\n                    observer.complete();\n                },\n                start(subscription) {\n                    tapObserver.start && tapObserver.start(subscription);\n                }\n            });\n        });\n    }\n    forEach(fn) {\n        return new Promise((resolve, reject) => {\n            if (typeof fn !== \"function\") {\n                reject(new TypeError(fn + \" is not a function\"));\n                return;\n            }\n            function done() {\n                subscription.unsubscribe();\n                resolve(undefined);\n            }\n            const subscription = this.subscribe({\n                next(value) {\n                    try {\n                        fn(value, done);\n                    }\n                    catch (e) {\n                        reject(e);\n                        subscription.unsubscribe();\n                    }\n                },\n                error(error) {\n                    reject(error);\n                },\n                complete() {\n                    resolve(undefined);\n                }\n            });\n        });\n    }\n    map(fn) {\n        if (typeof fn !== \"function\") {\n            throw new TypeError(fn + \" is not a function\");\n        }\n        const C = getSpecies(this);\n        return new C(observer => this.subscribe({\n            next(value) {\n                let propagatedValue = value;\n                try {\n                    propagatedValue = fn(value);\n                }\n                catch (e) {\n                    return observer.error(e);\n                }\n                observer.next(propagatedValue);\n            },\n            error(e) { observer.error(e); },\n            complete() { observer.complete(); },\n        }));\n    }\n    filter(fn) {\n        if (typeof fn !== \"function\") {\n            throw new TypeError(fn + \" is not a function\");\n        }\n        const C = getSpecies(this);\n        return new C(observer => this.subscribe({\n            next(value) {\n                try {\n                    if (!fn(value))\n                        return;\n                }\n                catch (e) {\n                    return observer.error(e);\n                }\n                observer.next(value);\n            },\n            error(e) { observer.error(e); },\n            complete() { observer.complete(); },\n        }));\n    }\n    reduce(fn, seed) {\n        if (typeof fn !== \"function\") {\n            throw new TypeError(fn + \" is not a function\");\n        }\n        const C = getSpecies(this);\n        const hasSeed = arguments.length > 1;\n        let hasValue = false;\n        let acc = seed;\n        return new C(observer => this.subscribe({\n            next(value) {\n                const first = !hasValue;\n                hasValue = true;\n                if (!first || hasSeed) {\n                    try {\n                        acc = fn(acc, value);\n                    }\n                    catch (e) {\n                        return observer.error(e);\n                    }\n                }\n                else {\n                    acc = value;\n                }\n            },\n            error(e) { observer.error(e); },\n            complete() {\n                if (!hasValue && !hasSeed) {\n                    return observer.error(new TypeError(\"Cannot reduce an empty sequence\"));\n                }\n                observer.next(acc);\n                observer.complete();\n            },\n        }));\n    }\n    concat(...sources) {\n        const C = getSpecies(this);\n        return new C(observer => {\n            let subscription;\n            let index = 0;\n            function startNext(next) {\n                subscription = next.subscribe({\n                    next(v) { observer.next(v); },\n                    error(e) { observer.error(e); },\n                    complete() {\n                        if (index === sources.length) {\n                            subscription = undefined;\n                            observer.complete();\n                        }\n                        else {\n                            startNext(C.from(sources[index++]));\n                        }\n                    },\n                });\n            }\n            startNext(this);\n            return () => {\n                if (subscription) {\n                    subscription.unsubscribe();\n                    subscription = undefined;\n                }\n            };\n        });\n    }\n    flatMap(fn) {\n        if (typeof fn !== \"function\") {\n            throw new TypeError(fn + \" is not a function\");\n        }\n        const C = getSpecies(this);\n        return new C(observer => {\n            const subscriptions = [];\n            const outer = this.subscribe({\n                next(value) {\n                    let normalizedValue;\n                    if (fn) {\n                        try {\n                            normalizedValue = fn(value);\n                        }\n                        catch (e) {\n                            return observer.error(e);\n                        }\n                    }\n                    else {\n                        normalizedValue = value;\n                    }\n                    const inner = C.from(normalizedValue).subscribe({\n                        next(innerValue) { observer.next(innerValue); },\n                        error(e) { observer.error(e); },\n                        complete() {\n                            const i = subscriptions.indexOf(inner);\n                            if (i >= 0)\n                                subscriptions.splice(i, 1);\n                            completeIfDone();\n                        },\n                    });\n                    subscriptions.push(inner);\n                },\n                error(e) { observer.error(e); },\n                complete() { completeIfDone(); },\n            });\n            function completeIfDone() {\n                if (outer.closed && subscriptions.length === 0) {\n                    observer.complete();\n                }\n            }\n            return () => {\n                subscriptions.forEach(s => s.unsubscribe());\n                outer.unsubscribe();\n            };\n        });\n    }\n    [(Symbol.observable, SymbolObservable)]() { return this; }\n    static from(x) {\n        const C = (typeof this === \"function\" ? this : Observable);\n        if (x == null) {\n            throw new TypeError(x + \" is not an object\");\n        }\n        const observableMethod = getMethod(x, SymbolObservable);\n        if (observableMethod) {\n            const observable = observableMethod.call(x);\n            if (Object(observable) !== observable) {\n                throw new TypeError(observable + \" is not an object\");\n            }\n            if (isObservable(observable) && observable.constructor === C) {\n                return observable;\n            }\n            return new C(observer => observable.subscribe(observer));\n        }\n        if (hasSymbol(\"iterator\")) {\n            const iteratorMethod = getMethod(x, SymbolIterator);\n            if (iteratorMethod) {\n                return new C(observer => {\n                    enqueue(() => {\n                        if (observer.closed)\n                            return;\n                        for (const item of iteratorMethod.call(x)) {\n                            observer.next(item);\n                            if (observer.closed)\n                                return;\n                        }\n                        observer.complete();\n                    });\n                });\n            }\n        }\n        if (Array.isArray(x)) {\n            return new C(observer => {\n                enqueue(() => {\n                    if (observer.closed)\n                        return;\n                    for (const item of x) {\n                        observer.next(item);\n                        if (observer.closed)\n                            return;\n                    }\n                    observer.complete();\n                });\n            });\n        }\n        throw new TypeError(x + \" is not observable\");\n    }\n    static of(...items) {\n        const C = (typeof this === \"function\" ? this : Observable);\n        return new C(observer => {\n            enqueue(() => {\n                if (observer.closed)\n                    return;\n                for (const item of items) {\n                    observer.next(item);\n                    if (observer.closed)\n                        return;\n                }\n                observer.complete();\n            });\n        });\n    }\n    static get [SymbolSpecies]() { return this; }\n}\nif (hasSymbols()) {\n    Object.defineProperty(Observable, Symbol(\"extensions\"), {\n        value: {\n            symbol: SymbolObservable,\n            hostReportError,\n        },\n        configurable: true,\n    });\n}\nexport default Observable;\n","/**\n * Unsubscribe from a subscription returned by something that looks like an observable,\n * but is not necessarily our observable implementation.\n */\nfunction unsubscribe(subscription) {\n    if (typeof subscription === \"function\") {\n        subscription();\n    }\n    else if (subscription && typeof subscription.unsubscribe === \"function\") {\n        subscription.unsubscribe();\n    }\n}\nexport default unsubscribe;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncSerialScheduler } from \"./_scheduler\";\nimport Observable from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\n/**\n * Filters the values emitted by another observable.\n * To be applied to an input observable using `pipe()`.\n */\nfunction filter(test) {\n    return (observable) => {\n        return new Observable(observer => {\n            const scheduler = new AsyncSerialScheduler(observer);\n            const subscription = observable.subscribe({\n                complete() {\n                    scheduler.complete();\n                },\n                error(error) {\n                    scheduler.error(error);\n                },\n                next(input) {\n                    scheduler.schedule((next) => __awaiter(this, void 0, void 0, function* () {\n                        if (yield test(input)) {\n                            next(input);\n                        }\n                    }));\n                }\n            });\n            return () => unsubscribe(subscription);\n        });\n    };\n}\nexport default filter;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __asyncValues = (this && this.__asyncValues) || function (o) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var m = o[Symbol.asyncIterator], i;\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n};\nimport { AsyncSerialScheduler } from \"./_scheduler\";\nimport { isAsyncIterator, isIterator } from \"./_util\";\nimport Observable from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\n/**\n * Maps the values emitted by another observable. In contrast to `map()`\n * the `mapper` function returns an array of values that will be emitted\n * separately.\n * Use `flatMap()` to map input values to zero, one or multiple output\n * values. To be applied to an input observable using `pipe()`.\n */\nfunction flatMap(mapper) {\n    return (observable) => {\n        return new Observable(observer => {\n            const scheduler = new AsyncSerialScheduler(observer);\n            const subscription = observable.subscribe({\n                complete() {\n                    scheduler.complete();\n                },\n                error(error) {\n                    scheduler.error(error);\n                },\n                next(input) {\n                    scheduler.schedule((next) => __awaiter(this, void 0, void 0, function* () {\n                        var e_1, _a;\n                        const mapped = yield mapper(input);\n                        if (isIterator(mapped) || isAsyncIterator(mapped)) {\n                            try {\n                                for (var mapped_1 = __asyncValues(mapped), mapped_1_1; mapped_1_1 = yield mapped_1.next(), !mapped_1_1.done;) {\n                                    const element = mapped_1_1.value;\n                                    next(element);\n                                }\n                            }\n                            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                            finally {\n                                try {\n                                    if (mapped_1_1 && !mapped_1_1.done && (_a = mapped_1.return)) yield _a.call(mapped_1);\n                                }\n                                finally { if (e_1) throw e_1.error; }\n                            }\n                        }\n                        else {\n                            mapped.map(output => next(output));\n                        }\n                    }));\n                }\n            });\n            return () => unsubscribe(subscription);\n        });\n    };\n}\nexport default flatMap;\n","/// <reference lib=\"es2018\" />\nimport { hasSymbol } from \"./_symbols\";\nexport function isAsyncIterator(thing) {\n    return thing && hasSymbol(\"asyncIterator\") && thing[Symbol.asyncIterator];\n}\nexport function isIterator(thing) {\n    return thing && hasSymbol(\"iterator\") && thing[Symbol.iterator];\n}\n","import { Observable } from \"./observable\";\n/**\n * Creates an observable that yields a new value every `period` milliseconds.\n * The first value emitted is 0, then 1, 2, etc. The first value is not emitted\n * immediately, but after the first interval.\n */\nexport default function interval(period) {\n    return new Observable(observer => {\n        let counter = 0;\n        const handle = setInterval(() => {\n            observer.next(counter++);\n        }, period);\n        return () => clearInterval(handle);\n    });\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncSerialScheduler } from \"./_scheduler\";\nimport Observable from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\n/**\n * Maps the values emitted by another observable to different values.\n * To be applied to an input observable using `pipe()`.\n */\nfunction map(mapper) {\n    return (observable) => {\n        return new Observable(observer => {\n            const scheduler = new AsyncSerialScheduler(observer);\n            const subscription = observable.subscribe({\n                complete() {\n                    scheduler.complete();\n                },\n                error(error) {\n                    scheduler.error(error);\n                },\n                next(input) {\n                    scheduler.schedule((next) => __awaiter(this, void 0, void 0, function* () {\n                        const mapped = yield mapper(input);\n                        next(mapped);\n                    }));\n                }\n            });\n            return () => unsubscribe(subscription);\n        });\n    };\n}\nexport default map;\n","import { Observable } from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\nfunction merge(...observables) {\n    if (observables.length === 0) {\n        return Observable.from([]);\n    }\n    return new Observable(observer => {\n        let completed = 0;\n        const subscriptions = observables.map(input => {\n            return input.subscribe({\n                error(error) {\n                    observer.error(error);\n                    unsubscribeAll();\n                },\n                next(value) {\n                    observer.next(value);\n                },\n                complete() {\n                    if (++completed === observables.length) {\n                        observer.complete();\n                        unsubscribeAll();\n                    }\n                }\n            });\n        });\n        const unsubscribeAll = () => {\n            subscriptions.forEach(subscription => unsubscribe(subscription));\n        };\n        return unsubscribeAll;\n    });\n}\nexport default merge;\n","import Observable from \"./observable\";\n// TODO: This observer iteration approach looks inelegant and expensive\n// Idea: Come up with super class for Subscription that contains the\n//       notify*, ... methods and use it here\n/**\n * A subject is a \"hot\" observable (see `multicast`) that has its observer\n * methods (`.next(value)`, `.error(error)`, `.complete()`) exposed.\n *\n * Be careful, though! With great power comes great responsibility. Only use\n * the `Subject` when you really need to trigger updates \"from the outside\" and\n * try to keep the code that can access it to a minimum. Return\n * `Observable.from(mySubject)` to not allow other code to mutate.\n */\nclass MulticastSubject extends Observable {\n    constructor() {\n        super(observer => {\n            this._observers.add(observer);\n            return () => this._observers.delete(observer);\n        });\n        this._observers = new Set();\n    }\n    next(value) {\n        for (const observer of this._observers) {\n            observer.next(value);\n        }\n    }\n    error(error) {\n        for (const observer of this._observers) {\n            observer.error(error);\n        }\n    }\n    complete() {\n        for (const observer of this._observers) {\n            observer.complete();\n        }\n    }\n}\nexport default MulticastSubject;\n","import Observable from \"./observable\";\nimport Subject from \"./subject\";\nimport unsubscribe from \"./unsubscribe\";\n// TODO: Subject already creates additional observables \"under the hood\",\n//       now we introduce even more. A true native MulticastObservable\n//       would be preferable.\n/**\n * Takes a \"cold\" observable and returns a wrapping \"hot\" observable that\n * proxies the input observable's values and errors.\n *\n * An observable is called \"cold\" when its initialization function is run\n * for each new subscriber. This is how observable-fns's `Observable`\n * implementation works.\n *\n * A hot observable is an observable where new subscribers subscribe to\n * the upcoming values of an already-initialiazed observable.\n *\n * The multicast observable will lazily subscribe to the source observable\n * once it has its first own subscriber and will unsubscribe from the\n * source observable when its last own subscriber unsubscribed.\n */\nfunction multicast(coldObservable) {\n    const subject = new Subject();\n    let sourceSubscription;\n    let subscriberCount = 0;\n    return new Observable(observer => {\n        // Init source subscription lazily\n        if (!sourceSubscription) {\n            sourceSubscription = coldObservable.subscribe(subject);\n        }\n        // Pipe all events from `subject` into this observable\n        const subscription = subject.subscribe(observer);\n        subscriberCount++;\n        return () => {\n            subscriberCount--;\n            subscription.unsubscribe();\n            // Close source subscription once last subscriber has unsubscribed\n            if (subscriberCount === 0) {\n                unsubscribe(sourceSubscription);\n                sourceSubscription = undefined;\n            }\n        };\n    });\n}\nexport default multicast;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncSerialScheduler } from \"./_scheduler\";\nimport Observable from \"./observable\";\nimport unsubscribe from \"./unsubscribe\";\nfunction scan(accumulator, seed) {\n    return (observable) => {\n        return new Observable(observer => {\n            let accumulated;\n            let index = 0;\n            const scheduler = new AsyncSerialScheduler(observer);\n            const subscription = observable.subscribe({\n                complete() {\n                    scheduler.complete();\n                },\n                error(error) {\n                    scheduler.error(error);\n                },\n                next(value) {\n                    scheduler.schedule((next) => __awaiter(this, void 0, void 0, function* () {\n                        const prevAcc = index === 0\n                            ? (typeof seed === \"undefined\" ? value : seed)\n                            : accumulated;\n                        accumulated = yield accumulator(prevAcc, value, index++);\n                        next(accumulated);\n                    }));\n                }\n            });\n            return () => unsubscribe(subscription);\n        });\n    };\n}\nexport default scan;\n","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122 § 4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serialize = exports.deserialize = exports.registerSerializer = void 0;\nconst serializers_1 = require(\"./serializers\");\nlet registeredSerializer = serializers_1.DefaultSerializer;\nfunction registerSerializer(serializer) {\n    registeredSerializer = serializers_1.extendSerializer(registeredSerializer, serializer);\n}\nexports.registerSerializer = registerSerializer;\nfunction deserialize(message) {\n    return registeredSerializer.deserialize(message);\n}\nexports.deserialize = deserialize;\nfunction serialize(input) {\n    return registeredSerializer.serialize(input);\n}\nexports.serialize = serialize;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Transfer = exports.DefaultSerializer = exports.expose = exports.registerSerializer = void 0;\nvar common_1 = require(\"./common\");\nObject.defineProperty(exports, \"registerSerializer\", { enumerable: true, get: function () { return common_1.registerSerializer; } });\n__exportStar(require(\"./master/index\"), exports);\nvar index_1 = require(\"./worker/index\");\nObject.defineProperty(exports, \"expose\", { enumerable: true, get: function () { return index_1.expose; } });\nvar serializers_1 = require(\"./serializers\");\nObject.defineProperty(exports, \"DefaultSerializer\", { enumerable: true, get: function () { return serializers_1.DefaultSerializer; } });\nvar transferable_1 = require(\"./transferable\");\nObject.defineProperty(exports, \"Transfer\", { enumerable: true, get: function () { return transferable_1.Transfer; } });\n","\"use strict\";\n// Source: <https://github.com/parcel-bundler/parcel/blob/master/packages/core/parcel-bundler/src/builtins/bundle-url.js>\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getBundleURL = exports.getBaseURL = void 0;\nlet bundleURL;\nfunction getBundleURLCached() {\n    if (!bundleURL) {\n        bundleURL = getBundleURL();\n    }\n    return bundleURL;\n}\nexports.getBundleURL = getBundleURLCached;\nfunction getBundleURL() {\n    // Attempt to find the URL of the current script and use that as the base URL\n    try {\n        throw new Error;\n    }\n    catch (err) {\n        const matches = (\"\" + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n        if (matches) {\n            return getBaseURL(matches[0]);\n        }\n    }\n    return \"/\";\n}\nfunction getBaseURL(url) {\n    return (\"\" + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/, '$1') + '/';\n}\nexports.getBaseURL = getBaseURL;\n","\"use strict\";\n// tslint:disable max-classes-per-file\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isWorkerRuntime = exports.getWorkerImplementation = exports.defaultPoolSize = void 0;\nconst get_bundle_url_browser_1 = require(\"./get-bundle-url.browser\");\nexports.defaultPoolSize = typeof navigator !== \"undefined\" && navigator.hardwareConcurrency\n    ? navigator.hardwareConcurrency\n    : 4;\nconst isAbsoluteURL = (value) => /^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.test(value);\nfunction createSourceBlobURL(code) {\n    const blob = new Blob([code], { type: \"application/javascript\" });\n    return URL.createObjectURL(blob);\n}\nfunction selectWorkerImplementation() {\n    if (typeof Worker === \"undefined\") {\n        // Might happen on Safari, for instance\n        // The idea is to only fail if the constructor is actually used\n        return class NoWebWorker {\n            constructor() {\n                throw Error(\"No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.\");\n            }\n        };\n    }\n    class WebWorker extends Worker {\n        constructor(url, options) {\n            var _a, _b;\n            if (typeof url === \"string\" && options && options._baseURL) {\n                url = new URL(url, options._baseURL);\n            }\n            else if (typeof url === \"string\" && !isAbsoluteURL(url) && get_bundle_url_browser_1.getBundleURL().match(/^file:\\/\\//i)) {\n                url = new URL(url, get_bundle_url_browser_1.getBundleURL().replace(/\\/[^\\/]+$/, \"/\"));\n                if ((_a = options === null || options === void 0 ? void 0 : options.CORSWorkaround) !== null && _a !== void 0 ? _a : true) {\n                    url = createSourceBlobURL(`importScripts(${JSON.stringify(url)});`);\n                }\n            }\n            if (typeof url === \"string\" && isAbsoluteURL(url)) {\n                // Create source code blob loading JS file via `importScripts()`\n                // to circumvent worker CORS restrictions\n                if ((_b = options === null || options === void 0 ? void 0 : options.CORSWorkaround) !== null && _b !== void 0 ? _b : true) {\n                    url = createSourceBlobURL(`importScripts(${JSON.stringify(url)});`);\n                }\n            }\n            super(url, options);\n        }\n    }\n    class BlobWorker extends WebWorker {\n        constructor(blob, options) {\n            const url = window.URL.createObjectURL(blob);\n            super(url, options);\n        }\n        static fromText(source, options) {\n            const blob = new window.Blob([source], { type: \"text/javascript\" });\n            return new BlobWorker(blob, options);\n        }\n    }\n    return {\n        blob: BlobWorker,\n        default: WebWorker\n    };\n}\nlet implementation;\nfunction getWorkerImplementation() {\n    if (!implementation) {\n        implementation = selectWorkerImplementation();\n    }\n    return implementation;\n}\nexports.getWorkerImplementation = getWorkerImplementation;\nfunction isWorkerRuntime() {\n    const isWindowContext = typeof self !== \"undefined\" && typeof Window !== \"undefined\" && self instanceof Window;\n    return typeof self !== \"undefined\" && self.postMessage && !isWindowContext ? true : false;\n}\nexports.isWorkerRuntime = isWorkerRuntime;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Worker = exports.BlobWorker = exports.isWorkerRuntime = exports.Thread = exports.spawn = exports.Pool = void 0;\nconst implementation_1 = require(\"./implementation\");\nObject.defineProperty(exports, \"isWorkerRuntime\", { enumerable: true, get: function () { return implementation_1.isWorkerRuntime; } });\nvar pool_1 = require(\"./pool\");\nObject.defineProperty(exports, \"Pool\", { enumerable: true, get: function () { return pool_1.Pool; } });\nvar spawn_1 = require(\"./spawn\");\nObject.defineProperty(exports, \"spawn\", { enumerable: true, get: function () { return spawn_1.spawn; } });\nvar thread_1 = require(\"./thread\");\nObject.defineProperty(exports, \"Thread\", { enumerable: true, get: function () { return thread_1.Thread; } });\n/** Separate class to spawn workers from source code blobs or strings. */\nexports.BlobWorker = implementation_1.getWorkerImplementation().blob;\n/** Worker implementation. Either web worker or a node.js Worker class. */\nexports.Worker = implementation_1.getWorkerImplementation().default;\n","\"use strict\";\n/*\n * This source file contains the code for proxying calls in the master thread to calls in the workers\n * by `.postMessage()`-ing.\n *\n * Keep in mind that this code can make or break the program's performance! Need to optimize more…\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProxyModule = exports.createProxyFunction = void 0;\nconst debug_1 = __importDefault(require(\"debug\"));\nconst observable_fns_1 = require(\"observable-fns\");\nconst common_1 = require(\"../common\");\nconst observable_promise_1 = require(\"../observable-promise\");\nconst transferable_1 = require(\"../transferable\");\nconst messages_1 = require(\"../types/messages\");\nconst debugMessages = debug_1.default(\"threads:master:messages\");\nlet nextJobUID = 1;\nconst dedupe = (array) => Array.from(new Set(array));\nconst isJobErrorMessage = (data) => data && data.type === messages_1.WorkerMessageType.error;\nconst isJobResultMessage = (data) => data && data.type === messages_1.WorkerMessageType.result;\nconst isJobStartMessage = (data) => data && data.type === messages_1.WorkerMessageType.running;\nfunction createObservableForJob(worker, jobUID) {\n    return new observable_fns_1.Observable(observer => {\n        let asyncType;\n        const messageHandler = ((event) => {\n            debugMessages(\"Message from worker:\", event.data);\n            if (!event.data || event.data.uid !== jobUID)\n                return;\n            if (isJobStartMessage(event.data)) {\n                asyncType = event.data.resultType;\n            }\n            else if (isJobResultMessage(event.data)) {\n                if (asyncType === \"promise\") {\n                    if (typeof event.data.payload !== \"undefined\") {\n                        observer.next(common_1.deserialize(event.data.payload));\n                    }\n                    observer.complete();\n                    worker.removeEventListener(\"message\", messageHandler);\n                }\n                else {\n                    if (event.data.payload) {\n                        observer.next(common_1.deserialize(event.data.payload));\n                    }\n                    if (event.data.complete) {\n                        observer.complete();\n                        worker.removeEventListener(\"message\", messageHandler);\n                    }\n                }\n            }\n            else if (isJobErrorMessage(event.data)) {\n                const error = common_1.deserialize(event.data.error);\n                if (asyncType === \"promise\" || !asyncType) {\n                    observer.error(error);\n                }\n                else {\n                    observer.error(error);\n                }\n                worker.removeEventListener(\"message\", messageHandler);\n            }\n        });\n        worker.addEventListener(\"message\", messageHandler);\n        return () => {\n            if (asyncType === \"observable\" || !asyncType) {\n                const cancelMessage = {\n                    type: messages_1.MasterMessageType.cancel,\n                    uid: jobUID\n                };\n                worker.postMessage(cancelMessage);\n            }\n            worker.removeEventListener(\"message\", messageHandler);\n        };\n    });\n}\nfunction prepareArguments(rawArgs) {\n    if (rawArgs.length === 0) {\n        // Exit early if possible\n        return {\n            args: [],\n            transferables: []\n        };\n    }\n    const args = [];\n    const transferables = [];\n    for (const arg of rawArgs) {\n        if (transferable_1.isTransferDescriptor(arg)) {\n            args.push(common_1.serialize(arg.send));\n            transferables.push(...arg.transferables);\n        }\n        else {\n            args.push(common_1.serialize(arg));\n        }\n    }\n    return {\n        args,\n        transferables: transferables.length === 0 ? transferables : dedupe(transferables)\n    };\n}\nfunction createProxyFunction(worker, method) {\n    return ((...rawArgs) => {\n        const uid = nextJobUID++;\n        const { args, transferables } = prepareArguments(rawArgs);\n        const runMessage = {\n            type: messages_1.MasterMessageType.run,\n            uid,\n            method,\n            args\n        };\n        debugMessages(\"Sending command to run function to worker:\", runMessage);\n        try {\n            worker.postMessage(runMessage, transferables);\n        }\n        catch (error) {\n            return observable_promise_1.ObservablePromise.from(Promise.reject(error));\n        }\n        return observable_promise_1.ObservablePromise.from(observable_fns_1.multicast(createObservableForJob(worker, uid)));\n    });\n}\nexports.createProxyFunction = createProxyFunction;\nfunction createProxyModule(worker, methodNames) {\n    const proxy = {};\n    for (const methodName of methodNames) {\n        proxy[methodName] = createProxyFunction(worker, methodName);\n    }\n    return proxy;\n}\nexports.createProxyModule = createProxyModule;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PoolEventType = void 0;\n/** Pool event type. Specifies the type of each `PoolEvent`. */\nvar PoolEventType;\n(function (PoolEventType) {\n    PoolEventType[\"initialized\"] = \"initialized\";\n    PoolEventType[\"taskCanceled\"] = \"taskCanceled\";\n    PoolEventType[\"taskCompleted\"] = \"taskCompleted\";\n    PoolEventType[\"taskFailed\"] = \"taskFailed\";\n    PoolEventType[\"taskQueued\"] = \"taskQueued\";\n    PoolEventType[\"taskQueueDrained\"] = \"taskQueueDrained\";\n    PoolEventType[\"taskStart\"] = \"taskStart\";\n    PoolEventType[\"terminated\"] = \"terminated\";\n})(PoolEventType = exports.PoolEventType || (exports.PoolEventType = {}));\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Pool = exports.Thread = exports.PoolEventType = void 0;\nconst debug_1 = __importDefault(require(\"debug\"));\nconst observable_fns_1 = require(\"observable-fns\");\nconst ponyfills_1 = require(\"../ponyfills\");\nconst implementation_1 = require(\"./implementation\");\nconst pool_types_1 = require(\"./pool-types\");\nObject.defineProperty(exports, \"PoolEventType\", { enumerable: true, get: function () { return pool_types_1.PoolEventType; } });\nconst thread_1 = require(\"./thread\");\nObject.defineProperty(exports, \"Thread\", { enumerable: true, get: function () { return thread_1.Thread; } });\nlet nextPoolID = 1;\nfunction createArray(size) {\n    const array = [];\n    for (let index = 0; index < size; index++) {\n        array.push(index);\n    }\n    return array;\n}\nfunction delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\nfunction flatMap(array, mapper) {\n    return array.reduce((flattened, element) => [...flattened, ...mapper(element)], []);\n}\nfunction slugify(text) {\n    return text.replace(/\\W/g, \" \").trim().replace(/\\s+/g, \"-\");\n}\nfunction spawnWorkers(spawnWorker, count) {\n    return createArray(count).map(() => ({\n        init: spawnWorker(),\n        runningTasks: []\n    }));\n}\nclass WorkerPool {\n    constructor(spawnWorker, optionsOrSize) {\n        this.eventSubject = new observable_fns_1.Subject();\n        this.initErrors = [];\n        this.isClosing = false;\n        this.nextTaskID = 1;\n        this.taskQueue = [];\n        const options = typeof optionsOrSize === \"number\"\n            ? { size: optionsOrSize }\n            : optionsOrSize || {};\n        const { size = implementation_1.defaultPoolSize } = options;\n        this.debug = debug_1.default(`threads:pool:${slugify(options.name || String(nextPoolID++))}`);\n        this.options = options;\n        this.workers = spawnWorkers(spawnWorker, size);\n        this.eventObservable = observable_fns_1.multicast(observable_fns_1.Observable.from(this.eventSubject));\n        Promise.all(this.workers.map(worker => worker.init)).then(() => this.eventSubject.next({\n            type: pool_types_1.PoolEventType.initialized,\n            size: this.workers.length\n        }), error => {\n            this.debug(\"Error while initializing pool worker:\", error);\n            this.eventSubject.error(error);\n            this.initErrors.push(error);\n        });\n    }\n    findIdlingWorker() {\n        const { concurrency = 1 } = this.options;\n        return this.workers.find(worker => worker.runningTasks.length < concurrency);\n    }\n    runPoolTask(worker, task) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const workerID = this.workers.indexOf(worker) + 1;\n            this.debug(`Running task #${task.id} on worker #${workerID}...`);\n            this.eventSubject.next({\n                type: pool_types_1.PoolEventType.taskStart,\n                taskID: task.id,\n                workerID\n            });\n            try {\n                const returnValue = yield task.run(yield worker.init);\n                this.debug(`Task #${task.id} completed successfully`);\n                this.eventSubject.next({\n                    type: pool_types_1.PoolEventType.taskCompleted,\n                    returnValue,\n                    taskID: task.id,\n                    workerID\n                });\n            }\n            catch (error) {\n                this.debug(`Task #${task.id} failed`);\n                this.eventSubject.next({\n                    type: pool_types_1.PoolEventType.taskFailed,\n                    taskID: task.id,\n                    error,\n                    workerID\n                });\n            }\n        });\n    }\n    run(worker, task) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const runPromise = (() => __awaiter(this, void 0, void 0, function* () {\n                const removeTaskFromWorkersRunningTasks = () => {\n                    worker.runningTasks = worker.runningTasks.filter(someRunPromise => someRunPromise !== runPromise);\n                };\n                // Defer task execution by one tick to give handlers time to subscribe\n                yield delay(0);\n                try {\n                    yield this.runPoolTask(worker, task);\n                }\n                finally {\n                    removeTaskFromWorkersRunningTasks();\n                    if (!this.isClosing) {\n                        this.scheduleWork();\n                    }\n                }\n            }))();\n            worker.runningTasks.push(runPromise);\n        });\n    }\n    scheduleWork() {\n        this.debug(`Attempt de-queueing a task in order to run it...`);\n        const availableWorker = this.findIdlingWorker();\n        if (!availableWorker)\n            return;\n        const nextTask = this.taskQueue.shift();\n        if (!nextTask) {\n            this.debug(`Task queue is empty`);\n            this.eventSubject.next({ type: pool_types_1.PoolEventType.taskQueueDrained });\n            return;\n        }\n        this.run(availableWorker, nextTask);\n    }\n    taskCompletion(taskID) {\n        return new Promise((resolve, reject) => {\n            const eventSubscription = this.events().subscribe(event => {\n                if (event.type === pool_types_1.PoolEventType.taskCompleted && event.taskID === taskID) {\n                    eventSubscription.unsubscribe();\n                    resolve(event.returnValue);\n                }\n                else if (event.type === pool_types_1.PoolEventType.taskFailed && event.taskID === taskID) {\n                    eventSubscription.unsubscribe();\n                    reject(event.error);\n                }\n                else if (event.type === pool_types_1.PoolEventType.terminated) {\n                    eventSubscription.unsubscribe();\n                    reject(Error(\"Pool has been terminated before task was run.\"));\n                }\n            });\n        });\n    }\n    settled(allowResolvingImmediately = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const getCurrentlyRunningTasks = () => flatMap(this.workers, worker => worker.runningTasks);\n            const taskFailures = [];\n            const failureSubscription = this.eventObservable.subscribe(event => {\n                if (event.type === pool_types_1.PoolEventType.taskFailed) {\n                    taskFailures.push(event.error);\n                }\n            });\n            if (this.initErrors.length > 0) {\n                return Promise.reject(this.initErrors[0]);\n            }\n            if (allowResolvingImmediately && this.taskQueue.length === 0) {\n                yield ponyfills_1.allSettled(getCurrentlyRunningTasks());\n                return taskFailures;\n            }\n            yield new Promise((resolve, reject) => {\n                const subscription = this.eventObservable.subscribe({\n                    next(event) {\n                        if (event.type === pool_types_1.PoolEventType.taskQueueDrained) {\n                            subscription.unsubscribe();\n                            resolve(void 0);\n                        }\n                    },\n                    error: reject // make a pool-wide error reject the completed() result promise\n                });\n            });\n            yield ponyfills_1.allSettled(getCurrentlyRunningTasks());\n            failureSubscription.unsubscribe();\n            return taskFailures;\n        });\n    }\n    completed(allowResolvingImmediately = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const settlementPromise = this.settled(allowResolvingImmediately);\n            const earlyExitPromise = new Promise((resolve, reject) => {\n                const subscription = this.eventObservable.subscribe({\n                    next(event) {\n                        if (event.type === pool_types_1.PoolEventType.taskQueueDrained) {\n                            subscription.unsubscribe();\n                            resolve(settlementPromise);\n                        }\n                        else if (event.type === pool_types_1.PoolEventType.taskFailed) {\n                            subscription.unsubscribe();\n                            reject(event.error);\n                        }\n                    },\n                    error: reject // make a pool-wide error reject the completed() result promise\n                });\n            });\n            const errors = yield Promise.race([\n                settlementPromise,\n                earlyExitPromise\n            ]);\n            if (errors.length > 0) {\n                throw errors[0];\n            }\n        });\n    }\n    events() {\n        return this.eventObservable;\n    }\n    queue(taskFunction) {\n        const { maxQueuedJobs = Infinity } = this.options;\n        if (this.isClosing) {\n            throw Error(`Cannot schedule pool tasks after terminate() has been called.`);\n        }\n        if (this.initErrors.length > 0) {\n            throw this.initErrors[0];\n        }\n        const taskID = this.nextTaskID++;\n        const taskCompletion = this.taskCompletion(taskID);\n        taskCompletion.catch((error) => {\n            // Prevent unhandled rejections here as we assume the user will use\n            // `pool.completed()`, `pool.settled()` or `task.catch()` to handle errors\n            this.debug(`Task #${taskID} errored:`, error);\n        });\n        const task = {\n            id: taskID,\n            run: taskFunction,\n            cancel: () => {\n                if (this.taskQueue.indexOf(task) === -1)\n                    return;\n                this.taskQueue = this.taskQueue.filter(someTask => someTask !== task);\n                this.eventSubject.next({\n                    type: pool_types_1.PoolEventType.taskCanceled,\n                    taskID: task.id\n                });\n            },\n            then: taskCompletion.then.bind(taskCompletion)\n        };\n        if (this.taskQueue.length >= maxQueuedJobs) {\n            throw Error(\"Maximum number of pool tasks queued. Refusing to queue another one.\\n\" +\n                \"This usually happens for one of two reasons: We are either at peak \" +\n                \"workload right now or some tasks just won't finish, thus blocking the pool.\");\n        }\n        this.debug(`Queueing task #${task.id}...`);\n        this.taskQueue.push(task);\n        this.eventSubject.next({\n            type: pool_types_1.PoolEventType.taskQueued,\n            taskID: task.id\n        });\n        this.scheduleWork();\n        return task;\n    }\n    terminate(force) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.isClosing = true;\n            if (!force) {\n                yield this.completed(true);\n            }\n            this.eventSubject.next({\n                type: pool_types_1.PoolEventType.terminated,\n                remainingQueue: [...this.taskQueue]\n            });\n            this.eventSubject.complete();\n            yield Promise.all(this.workers.map((worker) => __awaiter(this, void 0, void 0, function* () { return thread_1.Thread.terminate(yield worker.init); })));\n        });\n    }\n}\nWorkerPool.EventType = pool_types_1.PoolEventType;\n/**\n * Thread pool constructor. Creates a new pool and spawns its worker threads.\n */\nfunction PoolConstructor(spawnWorker, optionsOrSize) {\n    // The function exists only so we don't need to use `new` to create a pool (we still can, though).\n    // If the Pool is a class or not is an implementation detail that should not concern the user.\n    return new WorkerPool(spawnWorker, optionsOrSize);\n}\nPoolConstructor.EventType = pool_types_1.PoolEventType;\n/**\n * Thread pool constructor. Creates a new pool and spawns its worker threads.\n */\nexports.Pool = PoolConstructor;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.spawn = void 0;\nconst debug_1 = __importDefault(require(\"debug\"));\nconst observable_fns_1 = require(\"observable-fns\");\nconst common_1 = require(\"../common\");\nconst promise_1 = require(\"../promise\");\nconst symbols_1 = require(\"../symbols\");\nconst master_1 = require(\"../types/master\");\nconst invocation_proxy_1 = require(\"./invocation-proxy\");\nconst debugMessages = debug_1.default(\"threads:master:messages\");\nconst debugSpawn = debug_1.default(\"threads:master:spawn\");\nconst debugThreadUtils = debug_1.default(\"threads:master:thread-utils\");\nconst isInitMessage = (data) => data && data.type === \"init\";\nconst isUncaughtErrorMessage = (data) => data && data.type === \"uncaughtError\";\nconst initMessageTimeout = typeof process !== \"undefined\" && process.env.THREADS_WORKER_INIT_TIMEOUT\n    ? Number.parseInt(process.env.THREADS_WORKER_INIT_TIMEOUT, 10)\n    : 10000;\nfunction withTimeout(promise, timeoutInMs, errorMessage) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let timeoutHandle;\n        const timeout = new Promise((resolve, reject) => {\n            timeoutHandle = setTimeout(() => reject(Error(errorMessage)), timeoutInMs);\n        });\n        const result = yield Promise.race([\n            promise,\n            timeout\n        ]);\n        clearTimeout(timeoutHandle);\n        return result;\n    });\n}\nfunction receiveInitMessage(worker) {\n    return new Promise((resolve, reject) => {\n        const messageHandler = ((event) => {\n            debugMessages(\"Message from worker before finishing initialization:\", event.data);\n            if (isInitMessage(event.data)) {\n                worker.removeEventListener(\"message\", messageHandler);\n                resolve(event.data);\n            }\n            else if (isUncaughtErrorMessage(event.data)) {\n                worker.removeEventListener(\"message\", messageHandler);\n                reject(common_1.deserialize(event.data.error));\n            }\n        });\n        worker.addEventListener(\"message\", messageHandler);\n    });\n}\nfunction createEventObservable(worker, workerTermination) {\n    return new observable_fns_1.Observable(observer => {\n        const messageHandler = ((messageEvent) => {\n            const workerEvent = {\n                type: master_1.WorkerEventType.message,\n                data: messageEvent.data\n            };\n            observer.next(workerEvent);\n        });\n        const rejectionHandler = ((errorEvent) => {\n            debugThreadUtils(\"Unhandled promise rejection event in thread:\", errorEvent);\n            const workerEvent = {\n                type: master_1.WorkerEventType.internalError,\n                error: Error(errorEvent.reason)\n            };\n            observer.next(workerEvent);\n        });\n        worker.addEventListener(\"message\", messageHandler);\n        worker.addEventListener(\"unhandledrejection\", rejectionHandler);\n        workerTermination.then(() => {\n            const terminationEvent = {\n                type: master_1.WorkerEventType.termination\n            };\n            worker.removeEventListener(\"message\", messageHandler);\n            worker.removeEventListener(\"unhandledrejection\", rejectionHandler);\n            observer.next(terminationEvent);\n            observer.complete();\n        });\n    });\n}\nfunction createTerminator(worker) {\n    const [termination, resolver] = promise_1.createPromiseWithResolver();\n    const terminate = () => __awaiter(this, void 0, void 0, function* () {\n        debugThreadUtils(\"Terminating worker\");\n        // Newer versions of worker_threads workers return a promise\n        yield worker.terminate();\n        resolver();\n    });\n    return { terminate, termination };\n}\nfunction setPrivateThreadProps(raw, worker, workerEvents, terminate) {\n    const workerErrors = workerEvents\n        .filter(event => event.type === master_1.WorkerEventType.internalError)\n        .map(errorEvent => errorEvent.error);\n    // tslint:disable-next-line prefer-object-spread\n    return Object.assign(raw, {\n        [symbols_1.$errors]: workerErrors,\n        [symbols_1.$events]: workerEvents,\n        [symbols_1.$terminate]: terminate,\n        [symbols_1.$worker]: worker\n    });\n}\n/**\n * Spawn a new thread. Takes a fresh worker instance, wraps it in a thin\n * abstraction layer to provide the transparent API and verifies that\n * the worker has initialized successfully.\n *\n * @param worker Instance of `Worker`. Either a web worker, `worker_threads` worker or `tiny-worker` worker.\n * @param [options]\n * @param [options.timeout] Init message timeout. Default: 10000 or set by environment variable.\n */\nfunction spawn(worker, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        debugSpawn(\"Initializing new thread\");\n        const timeout = options && options.timeout ? options.timeout : initMessageTimeout;\n        const initMessage = yield withTimeout(receiveInitMessage(worker), timeout, `Timeout: Did not receive an init message from worker after ${timeout}ms. Make sure the worker calls expose().`);\n        const exposed = initMessage.exposed;\n        const { termination, terminate } = createTerminator(worker);\n        const events = createEventObservable(worker, termination);\n        if (exposed.type === \"function\") {\n            const proxy = invocation_proxy_1.createProxyFunction(worker);\n            return setPrivateThreadProps(proxy, worker, events, terminate);\n        }\n        else if (exposed.type === \"module\") {\n            const proxy = invocation_proxy_1.createProxyModule(worker, exposed.methods);\n            return setPrivateThreadProps(proxy, worker, events, terminate);\n        }\n        else {\n            const type = exposed.type;\n            throw Error(`Worker init message states unexpected type of expose(): ${type}`);\n        }\n    });\n}\nexports.spawn = spawn;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Thread = void 0;\nconst symbols_1 = require(\"../symbols\");\nfunction fail(message) {\n    throw Error(message);\n}\n/** Thread utility functions. Use them to manage or inspect a `spawn()`-ed thread. */\nexports.Thread = {\n    /** Return an observable that can be used to subscribe to all errors happening in the thread. */\n    errors(thread) {\n        return thread[symbols_1.$errors] || fail(\"Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.\");\n    },\n    /** Return an observable that can be used to subscribe to internal events happening in the thread. Useful for debugging. */\n    events(thread) {\n        return thread[symbols_1.$events] || fail(\"Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.\");\n    },\n    /** Terminate a thread. Remember to terminate every thread when you are done using it. */\n    terminate(thread) {\n        return thread[symbols_1.$terminate]();\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ObservablePromise = void 0;\nconst observable_fns_1 = require(\"observable-fns\");\nconst doNothing = () => undefined;\nconst returnInput = (input) => input;\nconst runDeferred = (fn) => Promise.resolve().then(fn);\nfunction fail(error) {\n    throw error;\n}\nfunction isThenable(thing) {\n    return thing && typeof thing.then === \"function\";\n}\n/**\n * Creates a hybrid, combining the APIs of an Observable and a Promise.\n *\n * It is used to proxy async process states when we are initially not sure\n * if that async process will yield values once (-> Promise) or multiple\n * times (-> Observable).\n *\n * Note that the observable promise inherits some of the observable's characteristics:\n * The `init` function will be called *once for every time anyone subscribes to it*.\n *\n * If this is undesired, derive a hot observable from it using `makeHot()` and\n * subscribe to that.\n */\nclass ObservablePromise extends observable_fns_1.Observable {\n    constructor(init) {\n        super((originalObserver) => {\n            // tslint:disable-next-line no-this-assignment\n            const self = this;\n            const observer = Object.assign(Object.assign({}, originalObserver), { complete() {\n                    originalObserver.complete();\n                    self.onCompletion();\n                }, error(error) {\n                    originalObserver.error(error);\n                    self.onError(error);\n                },\n                next(value) {\n                    originalObserver.next(value);\n                    self.onNext(value);\n                } });\n            try {\n                this.initHasRun = true;\n                return init(observer);\n            }\n            catch (error) {\n                observer.error(error);\n            }\n        });\n        this.initHasRun = false;\n        this.fulfillmentCallbacks = [];\n        this.rejectionCallbacks = [];\n        this.firstValueSet = false;\n        this.state = \"pending\";\n    }\n    onNext(value) {\n        if (!this.firstValueSet) {\n            this.firstValue = value;\n            this.firstValueSet = true;\n        }\n    }\n    onError(error) {\n        this.state = \"rejected\";\n        this.rejection = error;\n        for (const onRejected of this.rejectionCallbacks) {\n            // Promisifying the call to turn errors into unhandled promise rejections\n            // instead of them failing sync and cancelling the iteration\n            runDeferred(() => onRejected(error));\n        }\n    }\n    onCompletion() {\n        this.state = \"fulfilled\";\n        for (const onFulfilled of this.fulfillmentCallbacks) {\n            // Promisifying the call to turn errors into unhandled promise rejections\n            // instead of them failing sync and cancelling the iteration\n            runDeferred(() => onFulfilled(this.firstValue));\n        }\n    }\n    then(onFulfilledRaw, onRejectedRaw) {\n        const onFulfilled = onFulfilledRaw || returnInput;\n        const onRejected = onRejectedRaw || fail;\n        let onRejectedCalled = false;\n        return new Promise((resolve, reject) => {\n            const rejectionCallback = (error) => {\n                if (onRejectedCalled)\n                    return;\n                onRejectedCalled = true;\n                try {\n                    resolve(onRejected(error));\n                }\n                catch (anotherError) {\n                    reject(anotherError);\n                }\n            };\n            const fulfillmentCallback = (value) => {\n                try {\n                    resolve(onFulfilled(value));\n                }\n                catch (error) {\n                    rejectionCallback(error);\n                }\n            };\n            if (!this.initHasRun) {\n                this.subscribe({ error: rejectionCallback });\n            }\n            if (this.state === \"fulfilled\") {\n                return resolve(onFulfilled(this.firstValue));\n            }\n            if (this.state === \"rejected\") {\n                onRejectedCalled = true;\n                return resolve(onRejected(this.rejection));\n            }\n            this.fulfillmentCallbacks.push(fulfillmentCallback);\n            this.rejectionCallbacks.push(rejectionCallback);\n        });\n    }\n    catch(onRejected) {\n        return this.then(undefined, onRejected);\n    }\n    finally(onCompleted) {\n        const handler = onCompleted || doNothing;\n        return this.then((value) => {\n            handler();\n            return value;\n        }, () => handler());\n    }\n    static from(thing) {\n        if (isThenable(thing)) {\n            return new ObservablePromise(observer => {\n                const onFulfilled = (value) => {\n                    observer.next(value);\n                    observer.complete();\n                };\n                const onRejected = (error) => {\n                    observer.error(error);\n                };\n                thing.then(onFulfilled, onRejected);\n            });\n        }\n        else {\n            return super.from(thing);\n        }\n    }\n}\nexports.ObservablePromise = ObservablePromise;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Subject = exports.Observable = void 0;\nconst observable_fns_1 = require(\"observable-fns\");\nObject.defineProperty(exports, \"Observable\", { enumerable: true, get: function () { return observable_fns_1.Observable; } });\nconst $observers = Symbol(\"observers\");\n/**\n * Observable subject. Implements the Observable interface, but also exposes\n * the `next()`, `error()`, `complete()` methods to initiate observable\n * updates \"from the outside\".\n *\n * Use `Observable.from(subject)` to derive an observable that proxies all\n * values, errors and the completion raised on this subject, but does not\n * expose the `next()`, `error()`, `complete()` methods.\n */\nclass Subject extends observable_fns_1.Observable {\n    constructor() {\n        super(observer => {\n            this[$observers] = [\n                ...(this[$observers] || []),\n                observer\n            ];\n            const unsubscribe = () => {\n                this[$observers] = this[$observers].filter(someObserver => someObserver !== observer);\n            };\n            return unsubscribe;\n        });\n        this[$observers] = [];\n    }\n    complete() {\n        this[$observers].forEach(observer => observer.complete());\n    }\n    error(error) {\n        this[$observers].forEach(observer => observer.error(error));\n    }\n    next(value) {\n        this[$observers].forEach(observer => observer.next(value));\n    }\n}\nexports.Subject = Subject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.allSettled = void 0;\n// Based on <https://github.com/es-shims/Promise.allSettled/blob/master/implementation.js>\nfunction allSettled(values) {\n    return Promise.all(values.map(item => {\n        const onFulfill = (value) => {\n            return { status: 'fulfilled', value };\n        };\n        const onReject = (reason) => {\n            return { status: 'rejected', reason };\n        };\n        const itemPromise = Promise.resolve(item);\n        try {\n            return itemPromise.then(onFulfill, onReject);\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }));\n}\nexports.allSettled = allSettled;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createPromiseWithResolver = void 0;\nconst doNothing = () => undefined;\n/**\n * Creates a new promise and exposes its resolver function.\n * Use with care!\n */\nfunction createPromiseWithResolver() {\n    let alreadyResolved = false;\n    let resolvedTo;\n    let resolver = doNothing;\n    const promise = new Promise(resolve => {\n        if (alreadyResolved) {\n            resolve(resolvedTo);\n        }\n        else {\n            resolver = resolve;\n        }\n    });\n    const exposedResolver = (value) => {\n        alreadyResolved = true;\n        resolvedTo = value;\n        resolver(resolvedTo);\n    };\n    return [promise, exposedResolver];\n}\nexports.createPromiseWithResolver = createPromiseWithResolver;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultSerializer = exports.extendSerializer = void 0;\nfunction extendSerializer(extend, implementation) {\n    const fallbackDeserializer = extend.deserialize.bind(extend);\n    const fallbackSerializer = extend.serialize.bind(extend);\n    return {\n        deserialize(message) {\n            return implementation.deserialize(message, fallbackDeserializer);\n        },\n        serialize(input) {\n            return implementation.serialize(input, fallbackSerializer);\n        }\n    };\n}\nexports.extendSerializer = extendSerializer;\nconst DefaultErrorSerializer = {\n    deserialize(message) {\n        return Object.assign(Error(message.message), {\n            name: message.name,\n            stack: message.stack\n        });\n    },\n    serialize(error) {\n        return {\n            __error_marker: \"$$error\",\n            message: error.message,\n            name: error.name,\n            stack: error.stack\n        };\n    }\n};\nconst isSerializedError = (thing) => thing && typeof thing === \"object\" && \"__error_marker\" in thing && thing.__error_marker === \"$$error\";\nexports.DefaultSerializer = {\n    deserialize(message) {\n        if (isSerializedError(message)) {\n            return DefaultErrorSerializer.deserialize(message);\n        }\n        else {\n            return message;\n        }\n    },\n    serialize(input) {\n        if (input instanceof Error) {\n            return DefaultErrorSerializer.serialize(input);\n        }\n        else {\n            return input;\n        }\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.$worker = exports.$transferable = exports.$terminate = exports.$events = exports.$errors = void 0;\nexports.$errors = Symbol(\"thread.errors\");\nexports.$events = Symbol(\"thread.events\");\nexports.$terminate = Symbol(\"thread.terminate\");\nexports.$transferable = Symbol(\"thread.transferable\");\nexports.$worker = Symbol(\"thread.worker\");\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Transfer = exports.isTransferDescriptor = void 0;\nconst symbols_1 = require(\"./symbols\");\nfunction isTransferable(thing) {\n    if (!thing || typeof thing !== \"object\")\n        return false;\n    // Don't check too thoroughly, since the list of transferable things in JS might grow over time\n    return true;\n}\nfunction isTransferDescriptor(thing) {\n    return thing && typeof thing === \"object\" && thing[symbols_1.$transferable];\n}\nexports.isTransferDescriptor = isTransferDescriptor;\nfunction Transfer(payload, transferables) {\n    if (!transferables) {\n        if (!isTransferable(payload))\n            throw Error();\n        transferables = [payload];\n    }\n    return {\n        [symbols_1.$transferable]: true,\n        send: payload,\n        transferables\n    };\n}\nexports.Transfer = Transfer;\n","\"use strict\";\n/// <reference lib=\"dom\" />\n// tslint:disable max-classes-per-file\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkerEventType = void 0;\nconst symbols_1 = require(\"../symbols\");\n/** Event as emitted by worker thread. Subscribe to using `Thread.events(thread)`. */\nvar WorkerEventType;\n(function (WorkerEventType) {\n    WorkerEventType[\"internalError\"] = \"internalError\";\n    WorkerEventType[\"message\"] = \"message\";\n    WorkerEventType[\"termination\"] = \"termination\";\n})(WorkerEventType = exports.WorkerEventType || (exports.WorkerEventType = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkerMessageType = exports.MasterMessageType = void 0;\n/////////////////////////////\n// Messages sent by master:\nvar MasterMessageType;\n(function (MasterMessageType) {\n    MasterMessageType[\"cancel\"] = \"cancel\";\n    MasterMessageType[\"run\"] = \"run\";\n})(MasterMessageType = exports.MasterMessageType || (exports.MasterMessageType = {}));\n////////////////////////////\n// Messages sent by worker:\nvar WorkerMessageType;\n(function (WorkerMessageType) {\n    WorkerMessageType[\"error\"] = \"error\";\n    WorkerMessageType[\"init\"] = \"init\";\n    WorkerMessageType[\"result\"] = \"result\";\n    WorkerMessageType[\"running\"] = \"running\";\n    WorkerMessageType[\"uncaughtError\"] = \"uncaughtError\";\n})(WorkerMessageType = exports.WorkerMessageType || (exports.WorkerMessageType = {}));\n","\"use strict\";\n/// <reference lib=\"dom\" />\n// tslint:disable no-shadowed-variable\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst isWorkerRuntime = function isWorkerRuntime() {\n    const isWindowContext = typeof self !== \"undefined\" && typeof Window !== \"undefined\" && self instanceof Window;\n    return typeof self !== \"undefined\" && self.postMessage && !isWindowContext ? true : false;\n};\nconst postMessageToMaster = function postMessageToMaster(data, transferList) {\n    self.postMessage(data, transferList);\n};\nconst subscribeToMasterMessages = function subscribeToMasterMessages(onMessage) {\n    const messageHandler = (messageEvent) => {\n        onMessage(messageEvent.data);\n    };\n    const unsubscribe = () => {\n        self.removeEventListener(\"message\", messageHandler);\n    };\n    self.addEventListener(\"message\", messageHandler);\n    return unsubscribe;\n};\nexports.default = {\n    isWorkerRuntime,\n    postMessageToMaster,\n    subscribeToMasterMessages\n};\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.expose = exports.isWorkerRuntime = exports.Transfer = exports.registerSerializer = void 0;\nconst is_observable_1 = __importDefault(require(\"is-observable\"));\nconst common_1 = require(\"../common\");\nconst transferable_1 = require(\"../transferable\");\nconst messages_1 = require(\"../types/messages\");\nconst implementation_1 = __importDefault(require(\"./implementation\"));\nvar common_2 = require(\"../common\");\nObject.defineProperty(exports, \"registerSerializer\", { enumerable: true, get: function () { return common_2.registerSerializer; } });\nvar transferable_2 = require(\"../transferable\");\nObject.defineProperty(exports, \"Transfer\", { enumerable: true, get: function () { return transferable_2.Transfer; } });\n/** Returns `true` if this code is currently running in a worker. */\nexports.isWorkerRuntime = implementation_1.default.isWorkerRuntime;\nlet exposeCalled = false;\nconst activeSubscriptions = new Map();\nconst isMasterJobCancelMessage = (thing) => thing && thing.type === messages_1.MasterMessageType.cancel;\nconst isMasterJobRunMessage = (thing) => thing && thing.type === messages_1.MasterMessageType.run;\n/**\n * There are issues with `is-observable` not recognizing zen-observable's instances.\n * We are using `observable-fns`, but it's based on zen-observable, too.\n */\nconst isObservable = (thing) => is_observable_1.default(thing) || isZenObservable(thing);\nfunction isZenObservable(thing) {\n    return thing && typeof thing === \"object\" && typeof thing.subscribe === \"function\";\n}\nfunction deconstructTransfer(thing) {\n    return transferable_1.isTransferDescriptor(thing)\n        ? { payload: thing.send, transferables: thing.transferables }\n        : { payload: thing, transferables: undefined };\n}\nfunction postFunctionInitMessage() {\n    const initMessage = {\n        type: messages_1.WorkerMessageType.init,\n        exposed: {\n            type: \"function\"\n        }\n    };\n    implementation_1.default.postMessageToMaster(initMessage);\n}\nfunction postModuleInitMessage(methodNames) {\n    const initMessage = {\n        type: messages_1.WorkerMessageType.init,\n        exposed: {\n            type: \"module\",\n            methods: methodNames\n        }\n    };\n    implementation_1.default.postMessageToMaster(initMessage);\n}\nfunction postJobErrorMessage(uid, rawError) {\n    const { payload: error, transferables } = deconstructTransfer(rawError);\n    const errorMessage = {\n        type: messages_1.WorkerMessageType.error,\n        uid,\n        error: common_1.serialize(error)\n    };\n    implementation_1.default.postMessageToMaster(errorMessage, transferables);\n}\nfunction postJobResultMessage(uid, completed, resultValue) {\n    const { payload, transferables } = deconstructTransfer(resultValue);\n    const resultMessage = {\n        type: messages_1.WorkerMessageType.result,\n        uid,\n        complete: completed ? true : undefined,\n        payload\n    };\n    implementation_1.default.postMessageToMaster(resultMessage, transferables);\n}\nfunction postJobStartMessage(uid, resultType) {\n    const startMessage = {\n        type: messages_1.WorkerMessageType.running,\n        uid,\n        resultType\n    };\n    implementation_1.default.postMessageToMaster(startMessage);\n}\nfunction postUncaughtErrorMessage(error) {\n    try {\n        const errorMessage = {\n            type: messages_1.WorkerMessageType.uncaughtError,\n            error: common_1.serialize(error)\n        };\n        implementation_1.default.postMessageToMaster(errorMessage);\n    }\n    catch (subError) {\n        // tslint:disable-next-line no-console\n        console.error(\"Not reporting uncaught error back to master thread as it \" +\n            \"occured while reporting an uncaught error already.\" +\n            \"\\nLatest error:\", subError, \"\\nOriginal error:\", error);\n    }\n}\nfunction runFunction(jobUID, fn, args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let syncResult;\n        try {\n            syncResult = fn(...args);\n        }\n        catch (error) {\n            return postJobErrorMessage(jobUID, error);\n        }\n        const resultType = isObservable(syncResult) ? \"observable\" : \"promise\";\n        postJobStartMessage(jobUID, resultType);\n        if (isObservable(syncResult)) {\n            const subscription = syncResult.subscribe(value => postJobResultMessage(jobUID, false, common_1.serialize(value)), error => {\n                postJobErrorMessage(jobUID, common_1.serialize(error));\n                activeSubscriptions.delete(jobUID);\n            }, () => {\n                postJobResultMessage(jobUID, true);\n                activeSubscriptions.delete(jobUID);\n            });\n            activeSubscriptions.set(jobUID, subscription);\n        }\n        else {\n            try {\n                const result = yield syncResult;\n                postJobResultMessage(jobUID, true, common_1.serialize(result));\n            }\n            catch (error) {\n                postJobErrorMessage(jobUID, common_1.serialize(error));\n            }\n        }\n    });\n}\n/**\n * Expose a function or a module (an object whose values are functions)\n * to the main thread. Must be called exactly once in every worker thread\n * to signal its API to the main thread.\n *\n * @param exposed Function or object whose values are functions\n */\nfunction expose(exposed) {\n    if (!implementation_1.default.isWorkerRuntime()) {\n        throw Error(\"expose() called in the master thread.\");\n    }\n    if (exposeCalled) {\n        throw Error(\"expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.\");\n    }\n    exposeCalled = true;\n    if (typeof exposed === \"function\") {\n        implementation_1.default.subscribeToMasterMessages(messageData => {\n            if (isMasterJobRunMessage(messageData) && !messageData.method) {\n                runFunction(messageData.uid, exposed, messageData.args.map(common_1.deserialize));\n            }\n        });\n        postFunctionInitMessage();\n    }\n    else if (typeof exposed === \"object\" && exposed) {\n        implementation_1.default.subscribeToMasterMessages(messageData => {\n            if (isMasterJobRunMessage(messageData) && messageData.method) {\n                runFunction(messageData.uid, exposed[messageData.method], messageData.args.map(common_1.deserialize));\n            }\n        });\n        const methodNames = Object.keys(exposed).filter(key => typeof exposed[key] === \"function\");\n        postModuleInitMessage(methodNames);\n    }\n    else {\n        throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${exposed}`);\n    }\n    implementation_1.default.subscribeToMasterMessages(messageData => {\n        if (isMasterJobCancelMessage(messageData)) {\n            const jobUID = messageData.uid;\n            const subscription = activeSubscriptions.get(jobUID);\n            if (subscription) {\n                subscription.unsubscribe();\n                activeSubscriptions.delete(jobUID);\n            }\n        }\n    });\n}\nexports.expose = expose;\nif (typeof self !== \"undefined\" && typeof self.addEventListener === \"function\" && implementation_1.default.isWorkerRuntime()) {\n    self.addEventListener(\"error\", event => {\n        // Post with some delay, so the master had some time to subscribe to messages\n        setTimeout(() => postUncaughtErrorMessage(event.error || event), 250);\n    });\n    self.addEventListener(\"unhandledrejection\", event => {\n        const error = event.reason;\n        if (error && typeof error.message === \"string\") {\n            // Post with some delay, so the master had some time to subscribe to messages\n            setTimeout(() => postUncaughtErrorMessage(error), 250);\n        }\n    });\n}\nif (typeof process !== \"undefined\" && typeof process.on === \"function\" && implementation_1.default.isWorkerRuntime()) {\n    process.on(\"uncaughtException\", (error) => {\n        // Post with some delay, so the master had some time to subscribe to messages\n        setTimeout(() => postUncaughtErrorMessage(error), 250);\n    });\n    process.on(\"unhandledRejection\", (error) => {\n        if (error && typeof error.message === \"string\") {\n            // Post with some delay, so the master had some time to subscribe to messages\n            setTimeout(() => postUncaughtErrorMessage(error), 250);\n        }\n    });\n}\n","var x = y => { var x = {}; __webpack_require__.d(x, y); return x; }\nvar y = x => () => x\nmodule.exports = x({ [\"CallbackSinkNode\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.CallbackSinkNode, [\"CallbackSourceNode\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.CallbackSourceNode, [\"DataSerializer\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.DataSerializer, [\"DataService\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.DataService, [\"DummyDataService\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.DummyDataService, [\"DummyService\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.DummyService, [\"ModelBuilder\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.ModelBuilder, [\"ModelSerializer\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.ModelSerializer, [\"WorkerServiceProxy\"]: () => __WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__.WorkerServiceProxy });","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n  return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose;\n    if (async) {\n        if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n        dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n        if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n        dispose = value[Symbol.dispose];\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  function next() {\n    while (env.stack.length) {\n      var rec = env.stack.pop();\n      try {\n        var result = rec.dispose && rec.dispose.call(rec.value);\n        if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n      }\n      catch (e) {\n          fail(e);\n      }\n    }\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import 'reflect-metadata';\nimport { Observable } from 'threads/observable';\nimport { expose } from 'threads';\nimport { WorkerBase } from './WorkerBase';\nconst worker = new WorkerBase();\nexpose({\n  /**\n   * Worker initialization\n   * @param {WorkerData} config Worker data containing model information\n   * @returns {Promise<void>} Initialize promise\n   */\n  init(config) {\n    return worker.init(config);\n  },\n  /**\n   * Pull from this work\n   * @param {PullOptions} [options] Pull options\n   * @returns {Promise<void>} Pull promise\n   */\n  pull(options) {\n    return worker.pull(options);\n  },\n  /**\n   * Push to this worker\n   * @param {DataFrame} frame Data frame\n   * @param {PushOptions} [options] Push options\n   * @returns {Promise<void>} Push promise\n   */\n  push(frame, options) {\n    return worker.push(frame, options);\n  },\n  /**\n   * Input observable for pull requests\n   * @returns {Observable<void>} Observable input\n   */\n  pullOutput() {\n    return Observable.from(worker.pullOutput);\n  },\n  /**\n   * Output observable for push events\n   * @returns {Observable<any>} Observable output\n   */\n  pushOutput() {\n    return Observable.from(worker.pushOutput);\n  },\n  eventOutput() {\n    return Observable.from(worker.eventOutput);\n  },\n  eventInput(name, event) {\n    worker.model.emit(name, event);\n  },\n  /**\n   * Outgoing call to a service on the main thread\n   * @returns {Observable<WorkerServiceCall>} Observable of outgoing service calls\n   */\n  serviceOutputCall() {\n    return Observable.from(worker.serviceOutputCall);\n  },\n  /**\n   * Response to an outgoing service call from the main thread\n   * @param {WorkerServiceResponse} input Service response\n   */\n  serviceOutputResponse(input) {\n    worker.serviceOutputResponse.next(input);\n  },\n  serviceInputCall(call) {\n    return worker.callService(call);\n  },\n  findAllServices() {\n    return worker.findAllServices();\n  }\n});\nexport default worker;"],"names":["WorkerBase","constructor","this","pullOutput","pushOutput","serviceOutputCall","serviceOutputResponse","eventOutput","setShape","shape","init","config","Promise","resolve","reject","importFn","process","type","file","import","importScripts","__dirname","directory","imports","length","forEach","importFile","modelBuilder","ModelBuilder","create","services","service","dataType","DataType","DataSerializer","findTypeByName","addService","DummyDataService","uid","WorkerServiceProxy","callObservable","responseObservable","DummyService","_initModel","path","undefined","serialized","traversalBuilder","from","modelOrNode","ModelSerializer","deserializeNode","via","to","ex","builder","builderCallback","eval","args","graph","join","addShape","default","build","then","m","model","catch","pull","options","push","frame","deserialize","internalSource","CallbackSourceNode","next","internalSink","CallbackSinkNode","serialize","deleteNode","on","event","name","addNode","findAllServices","filter","map","serviceBase","Object","getPrototypeOf","DataService","driver","callService","call","findDataService","serviceUID","findService","method","serializedParams","parameters","params","param","promise","_","Array","isArray","result","r","id","success","webpackEmptyContext","req","e","Error","code","keys","module","exports","formatArgs","useColors","namespace","humanize","diff","c","color","splice","index","lastC","replace","match","save","namespaces","storage","setItem","removeItem","error","load","getItem","env","DEBUG","window","__nwjs","navigator","userAgent","toLowerCase","document","documentElement","style","WebkitAppearance","console","firebug","exception","table","parseInt","RegExp","$1","localStorage","localstorage","destroy","warned","warn","colors","log","debug","formatters","j","v","JSON","stringify","message","createDebug","prevTime","namespacesCache","enabledCache","enableOverride","enabled","self","curr","Number","Date","ms","prev","coerce","unshift","format","formatter","val","apply","selectColor","extend","defineProperty","enumerable","configurable","get","set","delimiter","newDebug","toNamespace","regexp","toString","substring","stack","disable","names","skips","enable","i","split","len","slice","test","key","hash","charCodeAt","Math","abs","value","Symbol","observable","s","h","d","w","y","plural","msAbs","n","isPlural","round","str","String","exec","parseFloat","parse","isFinite","long","fmtLong","fmtShort","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","rejected","done","AsyncSerialScheduler","observer","_baseObserver","_pendingPromises","Set","complete","all","schedule","task","prevPromisesCompletion","values","delete","add","hasSymbols","hasSymbol","Boolean","getSymbol","asyncIterator","for","SymbolIterator","SymbolObservable","SymbolSpecies","getMethod","obj","TypeError","getSpecies","ctor","Observable","hostReportError","setTimeout","enqueue","fn","cleanupSubscription","subscription","cleanup","_cleanup","unsubscribe","closeSubscription","_observer","_queue","_state","notifySubscription","onNotify","queue","item","flushSubscription","Subscription","subscriber","subscriptionObserver","SubscriptionObserver","closed","_subscription","_subscriber","subscribe","nextOrObserver","onError","onComplete","pipe","first","mappers","intermediate","mapper","tap","tapObserver","start","propagatedValue","reduce","seed","C","hasSeed","arguments","hasValue","acc","concat","sources","startNext","flatMap","subscriptions","outer","normalizedValue","inner","innerValue","indexOf","completeIfDone","static","x","observableMethod","isObservable","iteratorMethod","items","symbol","scheduler","input","__asyncValues","o","__values","iterator","verb","settle","e_1","_a","mapped","thing","isAsyncIterator","mapped_1_1","mapped_1","element","e_1_1","return","output","interval","period","counter","handle","setInterval","clearInterval","observables","completed","unsubscribeAll","MulticastSubject","super","_observers","coldObservable","subject","sourceSubscription","subscriberCount","accumulator","accumulated","prevAcc","Reflect","factory","root","g","Function","exporter","makeExporter","target","previous","writable","hasOwn","prototype","hasOwnProperty","supportsSymbol","toPrimitiveSymbol","toPrimitive","iteratorSymbol","supportsCreate","supportsProto","__proto__","downLevel","HashMap","MakeDictionary","has","functionPrototype","usePolyfill","_Map","Map","entries","CreateMapPolyfill","_Set","CreateSetPolyfill","Metadata","WeakMap","CreateWeakMapPolyfill","decorate","decorators","propertyKey","attributes","IsUndefined","IsArray","IsConstructor","DecorateConstructor","IsObject","IsNull","DecorateProperty","ToPropertyKey","metadata","metadataKey","metadataValue","decorator","IsPropertyKey","OrdinaryDefineOwnMetadata","defineMetadata","hasMetadata","OrdinaryHasMetadata","hasOwnMetadata","OrdinaryHasOwnMetadata","getMetadata","OrdinaryGetMetadata","getOwnMetadata","OrdinaryGetOwnMetadata","getMetadataKeys","OrdinaryMetadataKeys","getOwnMetadataKeys","OrdinaryOwnMetadataKeys","deleteMetadata","metadataMap","GetOrCreateMetadataMap","size","targetMetadata","decorated","descriptor","O","Create","MetadataKey","parent","OrdinaryGetPrototypeOf","ToBoolean","MetadataValue","ownKeys","parentKeys","_i","ownKeys_1","parentKeys_1","GetIterator","k","IteratorStep","nextValue","IteratorValue","IteratorClose","Type","IsSymbol","ToPrimitive","PreferredType","hint","exoticToPrim","GetMethod","OrdinaryToPrimitive","toString_1","IsCallable","valueOf","toString_2","argument","ToString","V","func","iterResult","f","proto","prototypeProto","cacheSentinel","arraySentinel","MapIterator","selector","_index","_keys","_values","_selector","throw","_cacheKey","_cacheIndex","_find","clear","getKey","getValue","getEntry","insert","_map","UUID_SIZE","rootKey","CreateUniqueKey","_key","GetOrCreateWeakMapTable","CreateUUID","FillRandomBytes","buffer","random","GenRandomBytes","Uint8Array","crypto","getRandomValues","msCrypto","data","offset","byte","__","registerSerializer","serializers_1","registeredSerializer","DefaultSerializer","serializer","extendSerializer","__createBinding","k2","__exportStar","p","Transfer","expose","common_1","index_1","transferable_1","bundleURL","getBaseURL","url","getBundleURL","err","matches","isWorkerRuntime","getWorkerImplementation","defaultPoolSize","get_bundle_url_browser_1","hardwareConcurrency","isAbsoluteURL","createSourceBlobURL","blob","Blob","URL","createObjectURL","implementation","Worker","NoWebWorker","WebWorker","_b","_baseURL","CORSWorkaround","BlobWorker","source","selectWorkerImplementation","isWindowContext","Window","postMessage","Thread","spawn","Pool","implementation_1","pool_1","spawn_1","thread_1","__importDefault","mod","__esModule","createProxyModule","createProxyFunction","debug_1","observable_fns_1","observable_promise_1","messages_1","debugMessages","nextJobUID","dedupe","array","isJobErrorMessage","WorkerMessageType","isJobResultMessage","isJobStartMessage","running","worker","rawArgs","transferables","arg","isTransferDescriptor","send","prepareArguments","runMessage","MasterMessageType","run","ObservablePromise","multicast","jobUID","asyncType","messageHandler","resultType","payload","removeEventListener","addEventListener","cancelMessage","cancel","createObservableForJob","methodNames","proxy","methodName","PoolEventType","ponyfills_1","pool_types_1","nextPoolID","WorkerPool","spawnWorker","optionsOrSize","eventSubject","Subject","initErrors","isClosing","nextTaskID","taskQueue","text","trim","workers","count","createArray","runningTasks","spawnWorkers","eventObservable","initialized","findIdlingWorker","concurrency","find","runPoolTask","workerID","taskStart","taskID","returnValue","taskCompleted","taskFailed","runPromise","someRunPromise","scheduleWork","availableWorker","nextTask","shift","taskQueueDrained","taskCompletion","eventSubscription","events","terminated","settled","allowResolvingImmediately","getCurrentlyRunningTasks","flattened","taskFailures","failureSubscription","allSettled","settlementPromise","earlyExitPromise","errors","race","taskFunction","maxQueuedJobs","Infinity","someTask","taskCanceled","bind","taskQueued","terminate","force","remainingQueue","PoolConstructor","EventType","promise_1","symbols_1","master_1","invocation_proxy_1","debugSpawn","debugThreadUtils","isInitMessage","isUncaughtErrorMessage","initMessageTimeout","THREADS_WORKER_INIT_TIMEOUT","setPrivateThreadProps","raw","workerEvents","workerErrors","WorkerEventType","internalError","errorEvent","assign","$errors","$events","$terminate","$worker","timeout","initMessage","timeoutInMs","errorMessage","timeoutHandle","clearTimeout","withTimeout","receiveInitMessage","exposed","termination","resolver","createPromiseWithResolver","createTerminator","workerTermination","messageEvent","workerEvent","rejectionHandler","reason","terminationEvent","createEventObservable","methods","fail","thread","doNothing","returnInput","runDeferred","originalObserver","onCompletion","onNext","initHasRun","fulfillmentCallbacks","rejectionCallbacks","firstValueSet","state","firstValue","rejection","onRejected","onFulfilled","onFulfilledRaw","onRejectedRaw","onRejectedCalled","rejectionCallback","anotherError","finally","onCompleted","handler","isThenable","$observers","someObserver","onFulfill","status","onReject","itemPromise","resolvedTo","alreadyResolved","fallbackDeserializer","fallbackSerializer","DefaultErrorSerializer","__error_marker","$transferable","postMessageToMaster","transferList","subscribeToMasterMessages","onMessage","is_observable_1","common_2","transferable_2","exposeCalled","activeSubscriptions","isMasterJobRunMessage","isZenObservable","deconstructTransfer","postJobErrorMessage","rawError","postJobResultMessage","resultValue","resultMessage","postUncaughtErrorMessage","uncaughtError","subError","runFunction","syncResult","startMessage","postJobStartMessage","messageData","postFunctionInitMessage","postModuleInitMessage","__webpack_require__","__WEBPACK_EXTERNAL_MODULE__openhps_core_es_min_js_27733f5f__","SuppressedError","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","getter","a","definition","globalThis","prop","toStringTag","eventInput","emit","serviceInputCall"],"sourceRoot":""}